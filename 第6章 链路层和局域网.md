# 第6章 链路层和局域网

## 6.1链路层概述

1.运行链路层协议的任何设备称为<font color = #FF0000>节点</font>。把沿着通信路径连接相邻节点的通信信道称为<font color = #FF0000>链路</font>。

2.链路层提供的服务：

* 成帧。在每个网络层数据报经链路传送之前，几乎所有的链路层协议都要将其用链路层帧封装起来。一个帧由一个数字字段和若干首部字段组成，其中网络层数据报就插在数据字段中。帧的结构由链路层协议规定。

* 链路接入。<font color = #FF0000>媒体访问控制协议（Medium Access Control, MAC）</font>协议规定了帧在链路上传输的规则。

* 可靠交付。当链路层协议提供可靠交付服务时，它保证无差错地经链路层移动每个网络层数据报。

* 差错检测和纠正。当帧中的一个比特作为1传输时，接收方节点中的链路层硬件可能不正确地将其判断为0，反之亦然。这种比特差错是由信号衰减和电磁噪声导致的。因为没有必要转发一个有差错的数据报，所以许多链路层协议提供一种机制来检测这样的比特差错。通过让发送节点在帧中包含差错检测比特，让接收节点进行差错检查，以此来完成这项工作。

3.链路层的主体部分是在网络适配器中实现的，网络适配器有时也称为<font color = #FF0000>网络接口卡（Network Interface Card, NIC）</font>。位于网络适配器核心的是链路层控制器，该控制器是一个实现了许多链路层服务的专用芯片。因此，链路层控制器的许多功能是用硬件实现的。越来越多的网络适配器被综合进主机的主板。部分链路层是在运行于主机CPU上的软件中实现的。链路层的软件组件实现了高层链路层功能，如组装链路层寻址信息和激活控制器硬件。所以，链路层是硬件和软件的结合体。



## 6.2差错检测和纠正技术

1.在发送节点，为了保护比特免受差错，使用<font color = #FF0000>差错检测和纠正比特（Error-Detection and-Correction, EDC）</font>来增强数据D。通常，要保护的数据不仅包括从网络层传递下来需要通过链路传输的数据报，而且包括链路帧首部中的链路的寻址信息、序号和其他字段。链路级中的D和EDC都被发送到接收节点。

2.<font color = #FF0000>奇偶校验</font>使用单个奇偶校验位。假设要发送的信息D有d比特。在偶校验方案中，发送方只需包含一个附加的比特，选择它的值，使得这d + 1比特中1的总数是偶数。对于奇校验方案，选择校验比特值使得有奇数个1。接收方只需要数一数接收的d + 1比特中1的数目即可。如果在采用偶校验方案中发现了奇数个值为1的比特，接收方知道出现了奇数个比特差错。

3.<font color = #FF0000>二维奇偶校验</font>方案中，D中的d个比特被划分为i行j列。对每行和每列计算奇偶值。产生的i + j + 1奇偶比特构成了链路层帧的差错检测比特。包含比特值改变的列和行的校验值都将会出现差错。因此接收方不仅可以检测到出现了单个比特差错的事实，而且还可以利用存在就校验差错的列和行的索引来实际识别发生差错的比特并纠正它。

4.<font color = #FF0000>检验和</font>技术中，数据的字节作为16比特的整数对待并求和。这个和的反码形成了携带在报文段首部的因特网检验和。接收方通过对接收的数据的和取反码，并且检测其结果是否全为1比特来检测检验和。如果这些比特中有任何比特是0，就可以指示出差错。

5.现今的计算机网络中广泛应用的差错检测技术基于<font color = #FF0000>循环冗余检测（Cyclic Redundancy Check, CRC）</font>。CRC编码也称为多项式编码，因为该编码能够将要发送的比特串看作为系数是0和1一个多项式，对比特串的操作被解释为多项式算术。

​       假设发送节点要发送一个d比特的数据D给接收节点。发送方和接收方首先必须协商一个r + 1比特模式，称为<font color = #FF0000>生成多项式</font>，将其表示为G。要求G的最高有效比特是1。对于一个给定的数据段D，发送方要选择r个附加比特R，并将它们附加到D上，使得得到的d + r比特模式用模2算术恰好能被G整除。接收方用G去除接收到的d + r比特。如果余数非0，接收方知道出现了差错；否则认为数据正确而被接收。

​       求附加比特R的公式：
$$
R = remainder \frac{D \cdot 2^r}{G}
$$
其中remainder表示求余数。

国际标准定义的32比特生成多项式为

<center>GCRC-32 = 100000100110000010001110110110111</center>

每个CRC标准都能检测小于r + 1比特的突发差错。此外，在适当的假设下，长度大于r + 1比特的突发差错以概率1 – 0.5r被检测到。每个CRC标准也都能检测任何奇数个比特差错。



## 6.3多路访问链路和协议

1.有两种类型的网络链路：点对点链路和广播链路。<font color = #FF0000>点对点链路</font>由链路一端的单个发送方和链路另一端的单个接收方组成。许多链路层协议都是为点对点链路设计的，如<font color = #FF0000>点对点协议（point-to-point protocol, PPP）</font>和<font color = #FF0000>高级数据链路控制（high-level data link control, HDLC）</font>就是两种这样的协议。广播链路能够让多个发送和接收节点都连接到相同的、单一的、共享的广播信道上。

2.对于速率为R bps的广播信道，多路访问协议应该具有以下所希望的特性：

* 当仅有一个节点发送数据时，该节点具有R bps的吞吐量；

*  当有M个节点发送数据时，每个节点吞吐量为R/M bps的平均传输速率；

* 协议是分散的，即不会因某节点故障而使整个系统崩溃；

* 协议是简单的，使实现不昂贵。

3.多路访问协议有三种：<font color = #FF0000>信道划分协议、随机接入协议和轮流协议</font>。

4.信道划分协议包括<font color = #FF0000>时分多路复用（TDM）、频分多路复用（FDM）和码分多址（Code Division Multiple Access, CDMA）</font>。

​       假设一个支持N个节点的信道且信道的传输速率为R bps。TDM将时间划分为时间帧，并进一步划分每个时间帧为N个时隙。然后把每个时隙分配给N个节点中的一个。无论何时某个节点在有分组要发送的时候，它在循环的TDM帧中指派给它的时隙内传输比特。TDM使每个节点在每个帧时间内得到了专用的传输速率，R/N bps。然而它由两个主要缺陷。首先，节点被限制于R/N bps的平均速率，即使当它是唯一有分组要发送的节点时。其次，节点必须总是等待它在传输序列中的轮次。

​       FDM将R bps信道划分为不同的频段，并把每个频率分配给N个节点中的一个。因此FDM在较大的R bps信道中创建了N个较小的R/N bps信道。FDM避免了碰撞，在N个节点之间公平地划分了带宽。然而限制一个节点只能使用R/N的带宽，即使当它是唯一一个有分组要发送的节点时。

​       CDMA对每个节点分配一种不同的编码。然后每个节点用它唯一的编码来对它发送的数据进行编码。如果精心选择这些编码，CDMA网络具有一种特性，即不同的节点能够同时传输，并且它们各自相应的接收方仍能正确接收发送方编码的数据比特，而不在乎其他节点的干扰传输。

5.在随机接入协议中，一个传输节点总是以信道的全部速率进行发送。当有碰撞时，设计碰撞的每个节点反复地重发它的帧，到该帧无碰撞地通过为止。但是当一个节点经历一次碰撞时，它不必立即重发该帧。相反，它在重发该帧之前等待一个随机时延。涉及碰撞的每个节点独立地选择随机时延。因为该随机实验是独立地选择的，所以下述现象是有可能的：这些节点之一所选择的时延充分小于其他碰撞节点的时延，并因此能够无碰撞地将它的帧在信道中发出。

<center>时隙ALOHA协议</center>

时隙ALOHA假设：

* 所有帧由L比特组成。

* 时间被划分成长度为L/R秒的时隙（这就是说，一个时隙等于传输一帧的时间）。

* 节点只是在时隙起点开始传输帧。

* 节点是同步的，每个节点都知道时隙何时开始。

* 如果在一个时隙中有两个或者更多个帧碰撞，则所有节点在该时隙结束之前检测到该碰撞事件。

令p是一个概率，即一个在0和1之间的数。在每个节点中，时隙ALOHA的操作是：

* 当节点有一个新帧要发送时，它等到下一个时隙开始并在该时隙传输整个帧。

* 如果没有碰撞，该节点成功地传输它的帧，从而不需要考虑重传该帧。

* 如果有碰撞，该节点在时隙结束之前检测到这次碰撞。该节点以概率p在后续的每个时隙中重传它的帧，直到该帧被无碰撞地传输出去。

时隙ALOHA有很多优点。当某节点是唯一活跃的节点时，时隙ALOHA允许该节点以全速R连续传输。时隙ALOHA也是高度分散的，因为每个节点检测碰撞并独立地决定什么时候重传。但是，当有N个活跃节点时，时隙ALOHA的效率是Np(1 – p)N – 1，这个表达式的最大值仅为1/e = 0.37。也就是说，当有大量活跃用户时，时隙ALOHA的最大效率只有37%。

<center>ALOHA</center>

时隙ALOHA协议要求所有的节点同步它们的传输，以在每个时隙开始时开始传播。在纯ALOHA中，当一帧首次到达，节点将立即以概率p重传该帧，否则，该节点等待一个帧传输时间。在此等待之后，它则以概率p传输该帧，或者以概率1 – p在另一个帧时间等待。纯ALOHA的最大效率仅为1/(2e)，这刚好是时隙ALOHA的一半。

<center>载波侦听多路访问（CSMA）</center>

载波侦听。即一个节点在传输前先听信道。如果来自另一个节点的帧正向信道上发送，节点则等待直到检测到一小段时间没有传输，然后开始传输。

<center>具有碰撞检测的载波侦听多路访问（CSMA/CD）</center>

CSMA没有进行碰撞检测；即使已经出现了碰撞。而CSMA/CD进行碰撞检测。碰撞检测，即当一个传输节点在传输时一直在侦听此信道。如果它检测到另一个节点正在传输干扰帧，它就停止传输，在重复“侦听-当空闲时时传输”循环之前等待一段随机时间。CSMA/CD的运行步骤：

1）适配器从网络层一条获得数据报，准备链路层帧，并将其放入帧适配器缓存中。

2）如果适配器侦听到信道空闲，它开始传输帧。在另一方面，如果适配器侦听到信道正在忙，它将等待，直到侦听到没有信号能量时才开始传输帧。

3）在传输过程中，适配器监视来自其他使用该广播信道的适配器的信号能量的存在。

4）如果适配器传输整个帧而未检测到来自其他适配器的信号能量，该适配器就完成了该帧。在另一方面，如果适配器在传输时检测到来自其他适配器的信号能量，它中止传输。

5）中止传输后，适配器等待一个随机时间量，然后返回步骤2。

CSMA/CD使用<font color = #FF0000>二进制指数后退算法</font>，使得当碰撞节点数量较少时，节点等待的时间间隔较短；当碰撞节点数量较大时，时间间隔较长。当传输一个给定帧时，在该帧经历了一连串n此碰撞后，节点随机地从{0, 1, 2, ..., 2n – 1}中选择一个K值。因此，一个帧经历的碰撞越多，K选择的间隔越大。对于以太网，一个节点等待实际时间量是K ∙ 512比特时间（即发送512比特进入以太网所需的时间量的K倍，n能够取的最大值为10。

CSMA/CD效率定义为：当有大量的活跃节点，且每个节点有大量帧要发送时，帧在信道中无碰撞地传输的那部分时间在长期运行时间中所占的份额。令dprop表示信号能量在任意两个适配器之间传播所需的最大时间。令dtrans表示传输一个最大长度的以太网帧的时间。则CSMA/CD的效率为
$$
\frac{1}{1 + 5d_{prop} / d_{trans}}
$$
6.<font color = #FF0000>轮流协议</font>主要有两种：轮询协议和令牌传递协议。

​     <font color = #FF0000>轮询协议</font>要求节点之一要被指定为主节点。主节点以循环的方式轮询每个节点。轮询协议消除了困扰随机接入协议的碰撞和空时隙，这使得轮询取得高得多的效率。但是它也有一些缺点。第一，该协议引入了轮询时延，即通知一个节点“它可以传输”所需的时间。第二，如果主节点有故障，整个信道都变得不可操作。

​       <font color = #FF0000>令牌传递协议</font>中没有主节点。一个成为令牌的小的特殊帧在节点之间以某种固定的次序进行交换。当一个节点收到令牌时，仅当它有一些帧要发送时，它才持有这个令牌，并发送最大数目的帧数，然后把令牌转发给下一个节点；否则它立即向下一个节点转发该令牌。令牌传递是分散的，并有很高的效率。但是一个节点的故障可能会使整个信道崩溃。或者如果一个节点偶然忘记了释放令牌，则必须调用某些恢复步骤使令牌返回到循环中来。

7.一个电缆接入网通常在电缆网头端将几千个住宅电缆调制解调器与一个<font color = #FF0000>电缆调制解调器端接系统（Cable Modem Termination System, CMTS）</font>连接。数据经<font color = #FF0000>电缆服务接口（Data-Over-Cable Service Interface, DOCSI）</font>规范（<font color = #FF0000>DOCSIS</font>）定义了电缆数据网络体系结构及其协议。



## 6.4交换局域网

1.主机或路由器的适配器（即网络接口）具有链路层地址。链路层地址有各种不同的称呼：<font color = #FF0000>LAN地址、物理地址或MAC（Medium Access Control）地址</font>。MAC地址是最为流行的术语。

2.没有两块适配器具有相同的地址。适配器的MAC地址具有扁平结构，而且不论适配器到哪里用都不会变化。

3.主机和路由器接口除了网络层地址之外还有MAC地址的原因有：

* 局域网是为任意网络层协议而设计的，而不只是用于IP和因特网。

* 如果适配器使用网络层地址而不是MAC地址的话，网络层地址必须存储在适配器的RAM中，并且在每次适配器移动时要重新配置。

4.<font color = #FF0000>地址解析协议（Address Resolution Protocol, ARP）</font>用于在网络层地址和链路层地址之间进行转换。ARP只为在同一个子网上的主机和路由器接口解析IP地址。

5.每台主机或路由器在其内存中具有一个<font color = #FF0000>ARP表</font>，这张表包含IP地址到MAC地址的映射关系。该ARP表也包含一个寿命值，它指示了从表中删除每个映射的时间。

6.假定主机A要向主机B发送一个数据报，该数据报要IP寻址到本子网上另一台主机或路由器。发送主机需要获得给定IP地址的目的主机的MAC地址。如果发送方的ARP表具有该目的节点的表项，则直接通过查询ARP表即可完成任务。如果ARP表中当前没有该目的主机的表项，发送方构造一个称为<font color = #FF0000>ARP分组</font>的特殊分组。一个ARP分组有几个字段，包括发送和接收IP地址及MAC地址。ARP查询分组和响应分组都具有相同的格式。ARP查询分组的目的是询问子网上所有其他主机和路由器，以确定对应于要解析的IP地址的那个MAC地址。

7.查询ARP报文是在广播帧中发送的，而响应ARP报文在一个标准帧中发送。ARP是即插即用的，即一个ARP表是自动建立的，它不需要系统管理员来配置。并且如果某主机与子网断开连接，它的表项最终会从留在子网中的节点的表中删除掉。

8.如果某台主机要向子网外的另一台主机发送数据报，则发送主机必须首先发送给最终目的路径上的第一跳路由器。

9.初始的<font color = #FF0000>以太网</font>是使用总线拓扑的一种广播局域网，即所有的帧传送到与该总线连接的所有适配器并被其处理。

在20世纪90年代后期，大多数公司和大学使用一种基于集线器的星形拓扑以太网安装替代了它们的局域网。在这种安装中，主机和路由器直接用双绞对铜线与一台集线器相连。<font color = #FF0000>集线器</font>是一种物理层设备，它作用于各个比特而不是作用于帧。当表示一个0或一个1的比特到达一个接口时，集线器只是重新生成这个比特，将其能量强度放大，并将该比特向其他所有接口传输出去。

在21世纪初，以太网又经历了一次重要的革命性变化。以太网安装继续使用星形拓扑，但是位于中心的集线器被<font color = #FF0000>交换机</font>所替代。

10.图6-1显示了以太网帧的结构。

![Ethernet](.\Image\Ethernet.png)

<center>图6-1 以太网帧结构</center>

以太网帧有以下6个字段：

* 数据字段（46~1500字节）。这个字段承载了IP数据报。以太网的最大传输单元是1500字节。这意味着如果IP数据报超过了1500字节，则主机必须将该数据报分片。数据字段的最小长度是46字节。这意味着如果IP数据报小于46字节，数据报必须被填充到46字节。当采用填充时，传递到网络层的数据包括IP数据报和填充部分。网络层使用IP数据报首部中的长度字段来去除填充部分。

* 目的地址（6字节）。这个字段包含目的适配器的MAC地址。当适配器收到一个以太网帧，帧的目的地址如果和该适配器MAC地址相同或为广播地址，则它都将该帧的数据字段的内容传递给网络层；如果它受到了具有任何其他MAC地址的帧，则丢弃之。

* 源地址（6字节）。这个地段包含了传输该帧到局域网上的适配器的MAC地址。

* 类型字段（2字节）。类型字段允许以太网复用多种网络层协议。

* CRC（4字节）。CRC字段的目的时使得接收器检测帧中是否引入了差错。

* 前同步码（8字节）。以太网帧以一个8字节的钱同步码字段开始。该前同步码的前7个字节的值都是10101010；最后一个字节时10101011。前同步码字段的前7字节用于“唤醒”接收适配器，并且将它们的时钟和发送方的时钟同步。前同步码的第8个字节的最后两个比特警告接收适配器，“重要的内容“就要到来了。

11.所有的以太网技术都向网络层提供无连接服务和不可靠服务。

12.<font color = #FF0000>过滤</font>是决定一个帧应该转发到某个接口还是应当将其丢弃的交换机功能。<font color = #FF0000>转发</font>是决定一个帧应该被导向哪个接口，并把该帧移动到那些接口的交换机功能。交换机的过滤和转发借助于<font color = #FF0000>交换机表</font>完成。该交换机表发函某局域网上某些主机和路由器的但不必是全部的表项。交换机表中的一个表项包含：一个MAC地址；通向该MAC地址的交换机接口；表项放置在表中的时间。

13.假定目的地址为A的帧从交换机接口x到达。交换机用地址A索引它的表。有3种可能的情况：

* 表中没有对于A的表项。在这种情况下，交换机向除接口x外的所有接口前面的输出缓存转发该帧的副本。换言之，如果没有对于目的地址的表项，交换机广播该帧。

* 表中有一个表项将A与接口x联系起来。在这种情况下，该帧从包括适配器A的局域网网段到来。无须将该帧转发到任何其他接口，交换机将通过丢弃该帧执行过滤功能即可。

* 表中有一个表项将A与接口y ≠ x联系起来。在这种情况下，该帧需要被转发到与接口y相连的局域网网段。交换机通过将该帧放到接口y前面的输出缓存完成转发功能。

14.交换机的表是自动、动态和自治地建立的，即没有来自网络管理员或来自配置协议的任何干预。即交换机的<font color = #FF0000>自学习</font>的。这种能力是以如下方式实现的：

* 交换机表初始为空。

* 对于在每个接口接受到的每个入帧，该交换机在其表中存储：在该帧源地址字段中的MAC地址；该帧到达的接口；当前时间。交换机以这种方式在它的表中记录了发送节点所在的局域网网段。

* 如果在一段时间（称为老化期）后，交换机没有接收到以该地址作为源地址的帧，就在表中删除这个地址。

15.使用交换机相对于使用总线或基于集线器的星形拓扑那样的广播链路的优点：

* 消除碰撞。在使用交换机构建的局域网中，没有因碰撞而浪费的贷款。交换机缓存帧并且决定不会在网段上同时传输多余一个帧。因此，交换机提供了比使用广播链路的局域网高得多的性能改善。

* 异质的链路。交换机将链路彼此隔离，因此局域网中的不同链路能够以不同的速率并且能够在不同的媒体上运行。因此，对于原有的设备与新设备混用，交换机是理想的。

* 管理。除了提供强化的安全性，交换机也易于进行网络管理。

16.交换机与路由器的比较：

* 交换机是即插即用的；交换机能够具有相对高的分组过滤和转发速率；交换机必须处理高至第二层的帧，而路由器必须处理高至第三层的数据报；为了防止广播帧的循环，交换网络的活跃拓扑限制为一颗生成树。另外，一个大型交换网络将要求在主机和路由器中有大量的ARP表，这将生成客观的ARP流量和处理量。而且，交换机对于广播风暴并不提供任何保护措施。

* 因为网络殉职通常是分层次的，即使当网络中存在冗余路径时，分组通常也不会通过路由器循环。所以，分组不会被限制到一颗生成树上，并可以使用源和目的地之间的最佳路径。路由器对第二层的广播风暴提供了防火墙保护。路由器不是即插即用的，即路由器和连接到它们的主机都需要人为地配置IP地址。而且路由器对每个分组的处理时间通常比交换机更长，因为它们必须处理高达第三层的字段。

17.支持<font color = #FF0000>虚拟局域网（Virtual Local Network, VLAN）</font>的交换机允许经一个单一的物理局域网基础设施定义多个虚拟局域网。在一个VLAN内的主机彼此通信，仿佛它们与交换机连接。在一个基于端口的VLAN中，交换机的端接口由网络管理员划分为组。每个组构成一个VLAN，在每个VLAN中形成一个广播域。



## 6.5链路虚拟化：网络作为链路层

1.<font color = #FF0000>多协议标签交换（Multiprotocol Label Switching, MPLS）</font>采用来自虚电路网络领域的一个关键概念：固定长度标签。其目标是：对于基于固定长度标签和虚电路的技术，在不放弃基于目的地IP数据报转发的基础设施的前提下，当可能时通过选择性地标识数据报并允许路由器基于固定长度的标签转发数据报来增强其功能。

2.图6-2显示了在MPLS使能的路由器之间传输的一个链路层帧。

![MPLS](.\Image\MPLS.png)

<center>图6-2 MPLS：位于链路层和网络层首部之间</center>

包括在MPLS首部中的字段是：标签；预留的3比特实验字段；1比特S字段，用于指示一系列“成栈”的MPLS首部的结束；寿命字段。

3.一个MPLS加强的帧仅能在两个均为MPLS使能的路由器之间发送。一个MPLS使能的路由器常被称为<font color = #FF0000>标签交换路由器</font>，因为它通过在其转发表中查找MPLS标签，然后立即将数据报传递给适当的输出接口来转发MPLS帧。因此，MPLS使能的路由器不需要提取目的IP地址和在转发表中执行最长前缀匹配的查找。

4.MPLS能够并且已经被用于实现所谓<font color = #FF0000>虚拟专用网（Virtual Private Network, VPN）</font>。



## 6.6数据中心网络

1.每个数据中心都有自己的数据中心网络，这些数据中心网络将其内部主机彼此互联并与因特网中的数据中心互联。数据中心中的主机称为<font color = #FF0000>刀片</font>，一般是包括CPU、内存和磁盘存储的商用主机。主机被堆叠在机架上，每个机架一般堆放20~40台刀片。在每一个机架顶部有一台交换机，这台交换机形象地被称为<font color = #FF0000>机架顶部（Top of Rank, TOR）</font>交换机，它们与机架上的主机互联，并与数据中心中的其他交换机互联。具体来说，机架上的每台主机都有一块与TOR交换机连接的网卡，每台TOR交换机有额外的端口能够与其他TOR交换机连接。

2.数据中心网络支持两种类型的流量：在外部客户与内部主机之间流动的流量，以及内部主机之间流动的流量。为了处理外部客户与内部主机之间流动的流量，数据中心网络包括了一台或者<font color = #FF0000>多台边界路由器</font>，它们将数据中心网络与公共因特网相连。数据中心网络因此需要将所有机架彼此互联，并将机架与边界路由器连接。

3.在数据中心内部，外部请求首先被定向到一个<font color = #FF0000>负载均衡器</font>。负载均衡器的任务是向主机分发请求，以主机当前的负载作为函数来在主机之间均衡负载。一个大型数据中心通常会有几台负载均衡器，每台服务于一组特定的云引用。由于负载均衡器基于分组的目的端口号以及目的的IP地址做决策，因此它们常被称为“第四层交换机”。一旦接收到一个对于特定应用程序的请求，负载均衡器将该请求分发到处理该应用的某一台主机上。当主机处理完该请求后，向负载均衡器回送响应，再由负载均衡器将其中继发回给外部客户。负载均衡器不仅彭亨主机间的工作负载，而且还提供类似NAT的功能，将外部IP地址转换为内部适当主机的IP地址，然后将反方向流向客户的分组按照相反的转换进行处理。这防止客户直接接触主机，从而具有隐藏网络内部结构和防止客户直接与主机交互等安全益处。

4.数据中心网络的两个设计趋势是<font color = #FF0000>全连接拓扑</font>和<font color = #FF0000>模块化数据中心</font>。